{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\nexports.shimAudioContext = shimAudioContext;\nvar _utils = require('../utils');\nvar utils = _interopRequireWildcard(_utils);\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction shimLocalStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var _this2 = this;\n      for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        streams[_key - 1] = arguments[_key];\n      }\n      if (streams) {\n        streams.forEach(function (stream) {\n          if (!_this2._localStreams) {\n            _this2._localStreams = [stream];\n          } else if (!_this2._localStreams.includes(stream)) {\n            _this2._localStreams.push(stream);\n          }\n        });\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      var index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\nfunction shimRemoteStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function get() {\n        return this._onaddstream;\n      },\n      set: function set(f) {\n        var _this4 = this;\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this4._remoteStreams) {\n              _this4._remoteStreams = [];\n            }\n            if (_this4._remoteStreams.includes(stream)) {\n              return;\n            }\n            _this4._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            _this4.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\nfunction shimCallbacksAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  var withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n  withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n  withCallback = function withCallback(candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, {\n      video: utils.compactObject(constraints.video)\n    });\n  }\n  return constraints;\n}\nfunction shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\nfunction shimAudioContext(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","_typeof","Symbol","iterator","obj","constructor","prototype","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimCallbacksAPI","shimGetUserMedia","shimConstraints","shimRTCIceServerUrls","shimTrackEventTransceiver","shimCreateOfferLegacy","shimAudioContext","_utils","require","utils","_interopRequireWildcard","__esModule","newObj","key","hasOwnProperty","call","default","window","RTCPeerConnection","getLocalStreams","_localStreams","_addTrack","addTrack","addStream","stream","_this","includes","push","getAudioTracks","forEach","track","getVideoTracks","_this2","_len","arguments","length","streams","Array","_key","apply","removeStream","_this3","index","indexOf","splice","tracks","getTracks","getSenders","sender","removeTrack","getRemoteStreams","_remoteStreams","get","_onaddstream","set","f","_this4","removeEventListener","_onaddstreampoly","addEventListener","e","event","Event","dispatchEvent","origSetRemoteDescription","setRemoteDescription","pc","origCreateOffer","createOffer","origCreateAnswer","createAnswer","setLocalDescription","addIceCandidate","successCallback","failureCallback","options","promise","then","Promise","resolve","withCallback","description","candidate","navigator","mediaDevices","getUserMedia","_getUserMedia","bind","constraints","cb","errcb","video","undefined","assign","compactObject","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","i","server","deprecated","JSON","parse","stringify","urls","url","generateCertificate","RTCTrackEvent","receiver","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","find","transceiver","kind","direction","setDirection","addTransceiver","offerToReceiveVideo","videoTransceiver","AudioContext","webkitAudioContext"],"sources":["G:/Software/github/video-conference/client/node_modules/webrtc-adapter/dist/safari/safari_shim.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\nexports.shimAudioContext = shimAudioContext;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimLocalStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var _this2 = this;\n\n      for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        streams[_key - 1] = arguments[_key];\n      }\n\n      if (streams) {\n        streams.forEach(function (stream) {\n          if (!_this2._localStreams) {\n            _this2._localStreams = [stream];\n          } else if (!_this2._localStreams.includes(stream)) {\n            _this2._localStreams.push(stream);\n          }\n        });\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      var index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function get() {\n        return this._onaddstream;\n      },\n      set: function set(f) {\n        var _this4 = this;\n\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this4._remoteStreams) {\n              _this4._remoteStreams = [];\n            }\n            if (_this4._remoteStreams.includes(stream)) {\n              return;\n            }\n            _this4._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            _this4.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  var withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function withCallback(candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimAudioContext(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}