{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\nexports.shimGetUserMedia = shimGetUserMedia;\nvar _utils = require('../utils.js');\nvar utils = _interopRequireWildcard(_utils);\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nvar logging = utils.log;\nfunction shimGetUserMedia(window, browserDetails) {\n  var navigator = window && window.navigator;\n  if (!navigator.mediaDevices) {\n    return;\n  }\n  var constraintsToChrome_ = function constraintsToChrome_(c) {\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = _typeof(c[key]) === 'object' ? c[key] : {\n        ideal: c[key]\n      };\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function oldname_(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n  var shimConstraints_ = function shimConstraints_(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : {\n        ideal: face\n      });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches = void 0;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {\n                exact: dev.deviceId\n              } : {\n                ideal: dev.deviceId\n              };\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n  var shimError_ = function shimError_(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n  var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","_typeof","Symbol","iterator","obj","constructor","prototype","shimGetUserMedia","_utils","require","utils","_interopRequireWildcard","__esModule","newObj","key","hasOwnProperty","call","default","logging","log","window","browserDetails","navigator","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","keys","forEach","r","ideal","exact","undefined","min","max","oldname_","prefix","name","charAt","toUpperCase","slice","oc","push","mix","advanced","concat","shimConstraints_","constraints","func","version","JSON","parse","stringify","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","filter","d","kind","dev","find","some","match","label","toLowerCase","includes","length","deviceId","shimError_","e","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMedia","bind","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","track","stop","DOMException","Promise","reject"],"sources":["G:/Software/github/video-conference/client/node_modules/webrtc-adapter/dist/chrome/getusermedia.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar logging = utils.log;\n\nfunction shimGetUserMedia(window, browserDetails) {\n  var navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  var constraintsToChrome_ = function constraintsToChrome_(c) {\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function oldname_(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function shimConstraints_(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches = void 0;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function shimError_(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AAEF,IAAIC,OAAO,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAI,OAAOA,MAAM,CAACC,QAAQ,KAAK,QAAQ,GAAG,UAAUC,GAAG,EAAE;EAAE,OAAO,OAAOA,GAAG;AAAE,CAAC,GAAG,UAAUA,GAAG,EAAE;EAAE,OAAOA,GAAG,IAAI,OAAOF,MAAM,KAAK,UAAU,IAAIE,GAAG,CAACC,WAAW,KAAKH,MAAM,IAAIE,GAAG,KAAKF,MAAM,CAACI,SAAS,GAAG,QAAQ,GAAG,OAAOF,GAAG;AAAE,CAAC;AAE5QL,OAAO,CAACQ,gBAAgB,GAAGA,gBAAgB;AAE3C,IAAIC,MAAM,GAAGC,OAAO,CAAC,aAAa,CAAC;AAEnC,IAAIC,KAAK,GAAGC,uBAAuB,CAACH,MAAM,CAAC;AAE3C,SAASG,uBAAuB,CAACP,GAAG,EAAE;EAAE,IAAIA,GAAG,IAAIA,GAAG,CAACQ,UAAU,EAAE;IAAE,OAAOR,GAAG;EAAE,CAAC,MAAM;IAAE,IAAIS,MAAM,GAAG,CAAC,CAAC;IAAE,IAAIT,GAAG,IAAI,IAAI,EAAE;MAAE,KAAK,IAAIU,GAAG,IAAIV,GAAG,EAAE;QAAE,IAAIP,MAAM,CAACS,SAAS,CAACS,cAAc,CAACC,IAAI,CAACZ,GAAG,EAAEU,GAAG,CAAC,EAAED,MAAM,CAACC,GAAG,CAAC,GAAGV,GAAG,CAACU,GAAG,CAAC;MAAE;IAAE;IAAED,MAAM,CAACI,OAAO,GAAGb,GAAG;IAAE,OAAOS,MAAM;EAAE;AAAE;AAE5Q,IAAIK,OAAO,GAAGR,KAAK,CAACS,GAAG;AAEvB,SAASZ,gBAAgB,CAACa,MAAM,EAAEC,cAAc,EAAE;EAChD,IAAIC,SAAS,GAAGF,MAAM,IAAIA,MAAM,CAACE,SAAS;EAE1C,IAAI,CAACA,SAAS,CAACC,YAAY,EAAE;IAC3B;EACF;EAEA,IAAIC,oBAAoB,GAAG,SAASA,oBAAoB,CAACC,CAAC,EAAE;IAC1D,IAAI,CAAC,OAAOA,CAAC,KAAK,WAAW,GAAG,WAAW,GAAGxB,OAAO,CAACwB,CAAC,CAAC,MAAM,QAAQ,IAAIA,CAAC,CAACC,SAAS,IAAID,CAAC,CAACE,QAAQ,EAAE;MACnG,OAAOF,CAAC;IACV;IACA,IAAIG,EAAE,GAAG,CAAC,CAAC;IACX/B,MAAM,CAACgC,IAAI,CAACJ,CAAC,CAAC,CAACK,OAAO,CAAC,UAAUhB,GAAG,EAAE;MACpC,IAAIA,GAAG,KAAK,SAAS,IAAIA,GAAG,KAAK,UAAU,IAAIA,GAAG,KAAK,aAAa,EAAE;QACpE;MACF;MACA,IAAIiB,CAAC,GAAG9B,OAAO,CAACwB,CAAC,CAACX,GAAG,CAAC,CAAC,KAAK,QAAQ,GAAGW,CAAC,CAACX,GAAG,CAAC,GAAG;QAAEkB,KAAK,EAAEP,CAAC,CAACX,GAAG;MAAE,CAAC;MACjE,IAAIiB,CAAC,CAACE,KAAK,KAAKC,SAAS,IAAI,OAAOH,CAAC,CAACE,KAAK,KAAK,QAAQ,EAAE;QACxDF,CAAC,CAACI,GAAG,GAAGJ,CAAC,CAACK,GAAG,GAAGL,CAAC,CAACE,KAAK;MACzB;MACA,IAAII,QAAQ,GAAG,SAASA,QAAQ,CAACC,MAAM,EAAEC,IAAI,EAAE;QAC7C,IAAID,MAAM,EAAE;UACV,OAAOA,MAAM,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC;QAC9D;QACA,OAAOH,IAAI,KAAK,UAAU,GAAG,UAAU,GAAGA,IAAI;MAChD,CAAC;MACD,IAAIR,CAAC,CAACC,KAAK,KAAKE,SAAS,EAAE;QACzBN,EAAE,CAACD,QAAQ,GAAGC,EAAE,CAACD,QAAQ,IAAI,EAAE;QAC/B,IAAIgB,EAAE,GAAG,CAAC,CAAC;QACX,IAAI,OAAOZ,CAAC,CAACC,KAAK,KAAK,QAAQ,EAAE;UAC/BW,EAAE,CAACN,QAAQ,CAAC,KAAK,EAAEvB,GAAG,CAAC,CAAC,GAAGiB,CAAC,CAACC,KAAK;UAClCJ,EAAE,CAACD,QAAQ,CAACiB,IAAI,CAACD,EAAE,CAAC;UACpBA,EAAE,GAAG,CAAC,CAAC;UACPA,EAAE,CAACN,QAAQ,CAAC,KAAK,EAAEvB,GAAG,CAAC,CAAC,GAAGiB,CAAC,CAACC,KAAK;UAClCJ,EAAE,CAACD,QAAQ,CAACiB,IAAI,CAACD,EAAE,CAAC;QACtB,CAAC,MAAM;UACLA,EAAE,CAACN,QAAQ,CAAC,EAAE,EAAEvB,GAAG,CAAC,CAAC,GAAGiB,CAAC,CAACC,KAAK;UAC/BJ,EAAE,CAACD,QAAQ,CAACiB,IAAI,CAACD,EAAE,CAAC;QACtB;MACF;MACA,IAAIZ,CAAC,CAACE,KAAK,KAAKC,SAAS,IAAI,OAAOH,CAAC,CAACE,KAAK,KAAK,QAAQ,EAAE;QACxDL,EAAE,CAACF,SAAS,GAAGE,EAAE,CAACF,SAAS,IAAI,CAAC,CAAC;QACjCE,EAAE,CAACF,SAAS,CAACW,QAAQ,CAAC,EAAE,EAAEvB,GAAG,CAAC,CAAC,GAAGiB,CAAC,CAACE,KAAK;MAC3C,CAAC,MAAM;QACL,CAAC,KAAK,EAAE,KAAK,CAAC,CAACH,OAAO,CAAC,UAAUe,GAAG,EAAE;UACpC,IAAId,CAAC,CAACc,GAAG,CAAC,KAAKX,SAAS,EAAE;YACxBN,EAAE,CAACF,SAAS,GAAGE,EAAE,CAACF,SAAS,IAAI,CAAC,CAAC;YACjCE,EAAE,CAACF,SAAS,CAACW,QAAQ,CAACQ,GAAG,EAAE/B,GAAG,CAAC,CAAC,GAAGiB,CAAC,CAACc,GAAG,CAAC;UAC3C;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IACF,IAAIpB,CAAC,CAACqB,QAAQ,EAAE;MACdlB,EAAE,CAACD,QAAQ,GAAG,CAACC,EAAE,CAACD,QAAQ,IAAI,EAAE,EAAEoB,MAAM,CAACtB,CAAC,CAACqB,QAAQ,CAAC;IACtD;IACA,OAAOlB,EAAE;EACX,CAAC;EAED,IAAIoB,gBAAgB,GAAG,SAASA,gBAAgB,CAACC,WAAW,EAAEC,IAAI,EAAE;IAClE,IAAI7B,cAAc,CAAC8B,OAAO,IAAI,EAAE,EAAE;MAChC,OAAOD,IAAI,CAACD,WAAW,CAAC;IAC1B;IACAA,WAAW,GAAGG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACL,WAAW,CAAC,CAAC;IACrD,IAAIA,WAAW,IAAIhD,OAAO,CAACgD,WAAW,CAACM,KAAK,CAAC,KAAK,QAAQ,EAAE;MAC1D,IAAIC,KAAK,GAAG,SAASA,KAAK,CAACpD,GAAG,EAAEqD,CAAC,EAAEC,CAAC,EAAE;QACpC,IAAID,CAAC,IAAIrD,GAAG,IAAI,EAAEsD,CAAC,IAAItD,GAAG,CAAC,EAAE;UAC3BA,GAAG,CAACsD,CAAC,CAAC,GAAGtD,GAAG,CAACqD,CAAC,CAAC;UACf,OAAOrD,GAAG,CAACqD,CAAC,CAAC;QACf;MACF,CAAC;MACDR,WAAW,GAAGG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACL,WAAW,CAAC,CAAC;MACrDO,KAAK,CAACP,WAAW,CAACM,KAAK,EAAE,iBAAiB,EAAE,qBAAqB,CAAC;MAClEC,KAAK,CAACP,WAAW,CAACM,KAAK,EAAE,kBAAkB,EAAE,sBAAsB,CAAC;MACpEN,WAAW,CAACM,KAAK,GAAG/B,oBAAoB,CAACyB,WAAW,CAACM,KAAK,CAAC;IAC7D;IACA,IAAIN,WAAW,IAAIhD,OAAO,CAACgD,WAAW,CAACU,KAAK,CAAC,KAAK,QAAQ,EAAE;MAC1D;MACA,IAAIC,IAAI,GAAGX,WAAW,CAACU,KAAK,CAACE,UAAU;MACvCD,IAAI,GAAGA,IAAI,KAAK,CAAC,OAAOA,IAAI,KAAK,WAAW,GAAG,WAAW,GAAG3D,OAAO,CAAC2D,IAAI,CAAC,MAAM,QAAQ,GAAGA,IAAI,GAAG;QAAE5B,KAAK,EAAE4B;MAAK,CAAC,CAAC;MAClH,IAAIE,0BAA0B,GAAGzC,cAAc,CAAC8B,OAAO,GAAG,EAAE;MAE5D,IAAIS,IAAI,KAAKA,IAAI,CAAC3B,KAAK,KAAK,MAAM,IAAI2B,IAAI,CAAC3B,KAAK,KAAK,aAAa,IAAI2B,IAAI,CAAC5B,KAAK,KAAK,MAAM,IAAI4B,IAAI,CAAC5B,KAAK,KAAK,aAAa,CAAC,IAAI,EAAEV,SAAS,CAACC,YAAY,CAACwC,uBAAuB,IAAIzC,SAAS,CAACC,YAAY,CAACwC,uBAAuB,EAAE,CAACF,UAAU,IAAI,CAACC,0BAA0B,CAAC,EAAE;QAC/Q,OAAOb,WAAW,CAACU,KAAK,CAACE,UAAU;QACnC,IAAIG,OAAO,GAAG,KAAK,CAAC;QACpB,IAAIJ,IAAI,CAAC3B,KAAK,KAAK,aAAa,IAAI2B,IAAI,CAAC5B,KAAK,KAAK,aAAa,EAAE;UAChEgC,OAAO,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC;QAC5B,CAAC,MAAM,IAAIJ,IAAI,CAAC3B,KAAK,KAAK,MAAM,IAAI2B,IAAI,CAAC5B,KAAK,KAAK,MAAM,EAAE;UACzDgC,OAAO,GAAG,CAAC,OAAO,CAAC;QACrB;QACA,IAAIA,OAAO,EAAE;UACX;UACA,OAAO1C,SAAS,CAACC,YAAY,CAAC0C,gBAAgB,EAAE,CAACC,IAAI,CAAC,UAAUC,OAAO,EAAE;YACvEA,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAC,UAAUC,CAAC,EAAE;cACpC,OAAOA,CAAC,CAACC,IAAI,KAAK,YAAY;YAChC,CAAC,CAAC;YACF,IAAIC,GAAG,GAAGJ,OAAO,CAACK,IAAI,CAAC,UAAUH,CAAC,EAAE;cAClC,OAAOL,OAAO,CAACS,IAAI,CAAC,UAAUC,KAAK,EAAE;gBACnC,OAAOL,CAAC,CAACM,KAAK,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACH,KAAK,CAAC;cAC9C,CAAC,CAAC;YACJ,CAAC,CAAC;YACF,IAAI,CAACH,GAAG,IAAIJ,OAAO,CAACW,MAAM,IAAId,OAAO,CAACa,QAAQ,CAAC,MAAM,CAAC,EAAE;cACtDN,GAAG,GAAGJ,OAAO,CAACA,OAAO,CAACW,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACrC;;YACA,IAAIP,GAAG,EAAE;cACPtB,WAAW,CAACU,KAAK,CAACoB,QAAQ,GAAGnB,IAAI,CAAC3B,KAAK,GAAG;gBAAEA,KAAK,EAAEsC,GAAG,CAACQ;cAAS,CAAC,GAAG;gBAAE/C,KAAK,EAAEuC,GAAG,CAACQ;cAAS,CAAC;YAC7F;YACA9B,WAAW,CAACU,KAAK,GAAGnC,oBAAoB,CAACyB,WAAW,CAACU,KAAK,CAAC;YAC3DzC,OAAO,CAAC,UAAU,GAAGkC,IAAI,CAACE,SAAS,CAACL,WAAW,CAAC,CAAC;YACjD,OAAOC,IAAI,CAACD,WAAW,CAAC;UAC1B,CAAC,CAAC;QACJ;MACF;MACAA,WAAW,CAACU,KAAK,GAAGnC,oBAAoB,CAACyB,WAAW,CAACU,KAAK,CAAC;IAC7D;IACAzC,OAAO,CAAC,UAAU,GAAGkC,IAAI,CAACE,SAAS,CAACL,WAAW,CAAC,CAAC;IACjD,OAAOC,IAAI,CAACD,WAAW,CAAC;EAC1B,CAAC;EAED,IAAI+B,UAAU,GAAG,SAASA,UAAU,CAACC,CAAC,EAAE;IACtC,IAAI5D,cAAc,CAAC8B,OAAO,IAAI,EAAE,EAAE;MAChC,OAAO8B,CAAC;IACV;IACA,OAAO;MACL1C,IAAI,EAAE;QACJ2C,qBAAqB,EAAE,iBAAiB;QACxCC,wBAAwB,EAAE,iBAAiB;QAC3CC,iBAAiB,EAAE,iBAAiB;QACpCC,oBAAoB,EAAE,eAAe;QACrCC,2BAA2B,EAAE,sBAAsB;QACnDC,eAAe,EAAE,kBAAkB;QACnCC,8BAA8B,EAAE,iBAAiB;QACjDC,uBAAuB,EAAE,iBAAiB;QAC1CC,eAAe,EAAE,YAAY;QAC7BC,kBAAkB,EAAE,YAAY;QAChCC,kBAAkB,EAAE;MACtB,CAAC,CAACX,CAAC,CAAC1C,IAAI,CAAC,IAAI0C,CAAC,CAAC1C,IAAI;MACnBsD,OAAO,EAAEZ,CAAC,CAACY,OAAO;MAClBC,UAAU,EAAEb,CAAC,CAACa,UAAU,IAAIb,CAAC,CAACc,cAAc;MAC5CC,QAAQ,EAAE,SAASA,QAAQ,GAAG;QAC5B,OAAO,IAAI,CAACzD,IAAI,IAAI,IAAI,CAACsD,OAAO,IAAI,IAAI,CAAC,GAAG,IAAI,CAACA,OAAO;MAC1D;IACF,CAAC;EACH,CAAC;EAED,IAAII,aAAa,GAAG,SAASA,aAAa,CAAChD,WAAW,EAAEiD,SAAS,EAAEC,OAAO,EAAE;IAC1EnD,gBAAgB,CAACC,WAAW,EAAE,UAAUxB,CAAC,EAAE;MACzCH,SAAS,CAAC8E,kBAAkB,CAAC3E,CAAC,EAAEyE,SAAS,EAAE,UAAUjB,CAAC,EAAE;QACtD,IAAIkB,OAAO,EAAE;UACXA,OAAO,CAACnB,UAAU,CAACC,CAAC,CAAC,CAAC;QACxB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD3D,SAAS,CAAC+E,YAAY,GAAGJ,aAAa,CAACK,IAAI,CAAChF,SAAS,CAAC;;EAEtD;EACA;EACA;EACA,IAAIA,SAAS,CAACC,YAAY,CAAC8E,YAAY,EAAE;IACvC,IAAIE,gBAAgB,GAAGjF,SAAS,CAACC,YAAY,CAAC8E,YAAY,CAACC,IAAI,CAAChF,SAAS,CAACC,YAAY,CAAC;IACvFD,SAAS,CAACC,YAAY,CAAC8E,YAAY,GAAG,UAAUG,EAAE,EAAE;MAClD,OAAOxD,gBAAgB,CAACwD,EAAE,EAAE,UAAU/E,CAAC,EAAE;QACvC,OAAO8E,gBAAgB,CAAC9E,CAAC,CAAC,CAACyC,IAAI,CAAC,UAAUuC,MAAM,EAAE;UAChD,IAAIhF,CAAC,CAAC8B,KAAK,IAAI,CAACkD,MAAM,CAACC,cAAc,EAAE,CAAC5B,MAAM,IAAIrD,CAAC,CAACkC,KAAK,IAAI,CAAC8C,MAAM,CAACE,cAAc,EAAE,CAAC7B,MAAM,EAAE;YAC5F2B,MAAM,CAACG,SAAS,EAAE,CAAC9E,OAAO,CAAC,UAAU+E,KAAK,EAAE;cAC1CA,KAAK,CAACC,IAAI,EAAE;YACd,CAAC,CAAC;YACF,MAAM,IAAIC,YAAY,CAAC,EAAE,EAAE,eAAe,CAAC;UAC7C;UACA,OAAON,MAAM;QACf,CAAC,EAAE,UAAUxB,CAAC,EAAE;UACd,OAAO+B,OAAO,CAACC,MAAM,CAACjC,UAAU,CAACC,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;EACH;AACF"},"metadata":{},"sourceType":"script"}